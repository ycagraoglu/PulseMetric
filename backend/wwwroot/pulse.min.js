/**
 * PulseMetric Analytics v2.0 - Minified
 * https://pulsemetric.com
 */
(function (w, d) { 'use strict'; var s = d.currentScript || d.querySelector('script[data-client-id]'), B = s ? s.src.substring(0, s.src.lastIndexOf('/')) : '', $ = B + '/api/collector', c = s ? s.getAttribute('data-client-id') : null; if (!c) return; var t = { ss: Date.now(), ps: Date.now(), pv: 0, sm: { 25: !1, 50: !1, 75: !1, 100: !1 }, lu: w.location.href, vi: null }; function h() { var p = [navigator.userAgent, navigator.language, screen.width + 'x' + screen.height, new Date().getTimezoneOffset(), navigator.hardwareConcurrency || 'u', navigator.platform || 'u'], x = p.join('|'), r = 0; for (var i = 0; i < x.length; i++) { r = ((r << 5) - r) + x.charCodeAt(i); r = r & r } return 'v_' + Math.abs(r).toString(36) } t.vi = h(); function g() { var u = navigator.userAgent; if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(u)) return 'T'; if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(u)) return 'M'; return 'D' } function u() { var p = new URLSearchParams(w.location.search), m = {};['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'].forEach(function (k) { var v = p.get(k); if (v) m[k.replace('utm_', '')] = v }); return Object.keys(m).length > 0 ? m : null } function e(n, x) { var p = { clientId: c, visitorId: t.vi, eventName: n || 'page_view', url: w.location.href, pageTitle: d.title || '', referrer: d.referrer, device: g(), screenWidth: w.innerWidth || screen.width, screenHeight: w.innerHeight || screen.height, language: navigator.language || '', timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || '', userAgent: navigator.userAgent, timestamp: Date.now(), sessionDuration: Math.round((Date.now() - t.ss) / 1e3), utm: u(), data: x || {} }; if (navigator.sendBeacon) { navigator.sendBeacon($, new Blob([JSON.stringify(p)], { type: 'application/json' })) } else { fetch($, { method: 'POST', body: JSON.stringify(p), headers: { 'Content-Type': 'application/json' }, keepalive: !0, credentials: 'include' }).catch(function () { }) } } function sp() { var dh = Math.max(d.body.scrollHeight, d.documentElement.scrollHeight, d.body.offsetHeight, d.documentElement.offsetHeight), wh = w.innerHeight, st = w.pageYOffset || d.documentElement.scrollTop; if (dh <= wh) return 100; return Math.round((st / (dh - wh)) * 100) } function ts() { var p = sp();[25, 50, 75, 100].forEach(function (m) { if (p >= m && !t.sm[m]) { t.sm[m] = !0; e('scroll_depth', { depth: m }) } }) } var st; w.addEventListener('scroll', function () { if (st) return; st = setTimeout(function () { ts(); st = null }, 200) }, { passive: !0 }); function tp() { var x = Math.round((Date.now() - t.ps) / 1e3); if (x > 0) e('time_on_page', { seconds: x }) } w.addEventListener('beforeunload', tp); d.addEventListener('visibilitychange', function () { if (d.visibilityState === 'hidden') tp() }); function ob(u) { try { return new URL(u, w.location.origin).hostname !== w.location.hostname } catch (e) { return !1 } } d.addEventListener('click', function (ev) { var a = ev.target.closest('a'); if (a && a.href && ob(a.href)) e('outbound_click', { url: a.href, text: (a.innerText || '').substring(0, 100) }) }, !0); function pc() { tp(); t.ps = Date.now(); t.pv++; t.sm = { 25: !1, 50: !1, 75: !1, 100: !1 }; t.lu = w.location.href; e('page_view') } var ops = history.pushState; history.pushState = function () { ops.apply(this, arguments); pc() }; var ors = history.replaceState; history.replaceState = function () { ors.apply(this, arguments); pc() }; w.addEventListener('popstate', pc); function gp() { if (w.performance && w.performance.getEntriesByType) { var n = w.performance.getEntriesByType('navigation'); if (n && n.length > 0) { var v = n[0]; return { loadTime: Math.round(v.loadEventEnd - v.startTime), domReady: Math.round(v.domContentLoadedEventEnd - v.startTime), firstByte: Math.round(v.responseStart - v.startTime) } } } return null } setTimeout(function () { e('engaged', { afterSeconds: 30 }) }, 3e4); e('session_start', { visitorId: t.vi, utm: u() }); t.pv++; e('page_view'); w.addEventListener('load', function () { setTimeout(function () { var m = gp(); if (m) e('performance', m) }, 100) }); w.PulseMetric = { track: e, identify: function (id, tr) { e('identify', { userId: id, traits: tr || {} }) }, getVisitorId: function () { return t.vi }, getSessionDuration: function () { return Math.round((Date.now() - t.ss) / 1e3) } } })(window, document);
